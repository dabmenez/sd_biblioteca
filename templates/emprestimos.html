{% extends "index.html" %}

{% block title %}Gerenciar Empréstimos{% endblock %}
{% block content %}
<div class="container">
        <p class="h1 text-center">Gerenciar Empréstimos</p>
<div class="container">
    <div class="row">
        <div class="col">
        <p class="h3 text-center">
            Registrar empréstimo
        </p>
            <form action="{{ url_for('emprestimos') }}" method="POST">
            <div class="mb-3">
                <label class="form-label" for="livro_id">Livro:</label>
                <select class="form-select" id="livro_id" name="livro_id" required>
                    {% for livro in livros %}
                    <option value="{{ livro.id }}">{{ livro.titulo }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label" for="aluno_id">Aluno:</label>
                <select class="form-select" id="aluno_id" name="aluno_id" required>
                    {% for aluno in alunos %}
                    <option value="{{ aluno.id }}">{{ aluno.nome_completo }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="d-grid">
                <button class="btn btn-primary mt-3 mx-auto" type="submit">Registrar Empréstimo</button>
            </div>

        </form>
        </div>
        <div class="col">
            <p class="h3 text-center">Lista de Empréstimos</p>
        <ul class="list-group">
            {% for emprestimo in emprestimos %}
            <li class="list-group-item">
                {{ emprestimo.livro.titulo }} -
                {{ emprestimo.aluno.nome_completo }} -
                Data de Entrega:
                {% if emprestimo.data_entrega %}
                {{ emprestimo.data_entrega.strftime('%d/%m/%Y às %H:%M') }}
            {% else %}
                Em andamento
            {% endif %}
            </li>
            {% endfor %}
        </ul>
        </div>
    </div>

</div>


    </div>
{% endblock %}

